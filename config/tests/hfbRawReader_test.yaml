# Read raw HFB data and write it as HDF5 data

# Constants
cpu_affinity: []
log_level: info
num_elements: 2048
num_ev: 4
num_local_freq: 1
num_frb_total_beams: 1024
factor_upchan: 128

dataset_manager:
  ds_broker_host: "127.0.0.1"
  ds_broker_port: 12050
  use_dataset_broker: True

read_buffer:
  kotekan_buffer: hfb
  metadata_pool: hfb_pool
  num_frames: '4096'
  num_prod: 2048

hfb_pool:
  kotekan_metadata_pool: hfbMetadata
  num_metadata_objects: '655360'

read_raw:
  log_level: debug
#  chunk_size:
#  - 64
#  - 66
#  - 128
  infile:  /mnt/ramdisk/20200619T182859Z_chimeHFB_corr/00000000_0000
  kotekan_stage: hfbRawReader
  max_read_rate: 0.0
  out_buf: read_buffer
  readahead_blocks: 4
  ignore_versions: True

write_hdf5:
  log_level: debug
  chunk_size:
  - 8
  - 66
  - 128
  - 128
  - 128
  kotekan_stage: hfbTranspose
  in_buf: read_buffer
  #outfile:  /home/willis/hfb_data/moose_data/00000000_0000
  outfile:  ./00000000_0000

#hfb_debug:
#  kotekan_stage: visDebug
#  in_buf: read_buffer
